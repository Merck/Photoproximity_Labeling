#  Proximity Labeling Code File Description

###  Written by Cory Haley White


#  Intro

Provided below is a description of each code file.  

##  Wrapper Files (Run_All***.sh)

Wrapper files start with the words "Run_All" and are shell files designed to be run in Linux.  If in Windows, you must set up your own wrapper files in batch.  All code is designed to take variables from these wrapper scripts for each experiment and pass them to the Run_Analysis.sh wrapper script.  The variables for each experiment are also stored within the wrapper files (e.g. Run_All_CD45_1137_p22.sh).  An overall wrapper script Run_All.sh is present to run each individual experiment, the setup, the analysis, and the venn diagram creation in one command.  You can run single wrappers for individual experiments if the data is already decompressed and you can call Rscript in the command line.  

## Run_Setup.sh 

Setup script to decompress tar.gz file and place files in proper location for the rest of the code.  

##  Run_Analysis.sh

Shell script to run Rscript files in proper order for analysis.  

##  Run_Venn.sh

Shell script to run Rscript venn creation code with proper inputs.  

##  Filter_by_PeptideCount.r

This R code filters the peptides by the given peptide count for that protein.  Peptides belonging to proteins which only have a single peptide present in the experiment are excluded.  This code is used in wrappers where the input is defined in the wrapper.

##  Correlations_IQTMT_proteinlvl.r

This R code removes peptides not following a specific format, normalizes peptides, compresses peptide abundance measure to protein abundance measure, filters proteins that don't reach the filter setting in at least half of the samples, removes antibody contaminants (if variable set), and measures correlations to a target.    

Output file example: 
CD45_1137_p22_CD45Target_AllAnalyses.csv

##  Differential_Abundance_IQTMT_proteinlvl.r

This script reads data created by the Correlation scripts above along with an experimental design file.  This code converts to log2 values and replaces 0 with the minimum value.  Then, it performs linear modeling with Limma to generate log2FC, p-values, and FDR corrected p-values.  Finally, it generates some very basic volcano plots and histograms for initial analysis and outputs all tabular information to the original input file generated by the correlation script.  

Output file example:  
CD45_1137_p22_CD45Target_AllAnalyses.csv  

##  MakeGeneList.r

Generates a gene list given a log2FC and correlation cutoff for ease of entry into programs to perform such things as gene set enrichment analysis.  

Output file example:  
CD45_1137_p22_lg2=1.txt  

##  VolcanoPlots_IQTMT_proteinlvl.r

Generates various volcano plots at given log2FC cutoffs.  This script also produces .csv file output for the genes/protein information of significant hits in the enriched high log2FC region.  Coloration in the volcano plot is determine by providing a list of genes.  Normally, green is used for the association list and orange for the enriched list.  Another label list can be given to label proteins of interest in the volcano plot.  You can also use the association lists to generate coloration of other gene sets and give them labels.  

Output file example:  
DataFile:  
CD45_1137_p22_CD45_lg2=1.32_Vplot.csv  
ImageFile:  
CD45_1137_p22_Target_vs_Iso_Lg2FC_1.32_VPlot.tiff  

##  Cleanup_IQTMT.r

Zips results and moves zip file to a temporary directory to send data to others. 

##  Make_Sup_Table.r

Get all results and perform membrane identification with Uniprot database.  This script outputs two excel files of data to be manually merged into a single supplementary data file.  

##  Venn_2way***.r   Venn_3way.r   Venn_4way.r

A series of venn diagrams was generated to compare sets of experiments.  The code for these are designated as Venn_4way.r Venn_3way.r and Venn_2way_<experiment1>_vs_<experiment2>.  These scripts are not designed to be generic, and may not work for other experiments.  Generally, they are designed to take 4, 3, and 2 files (both file name and directory structure) along with output file names and an exclusion list to generate images and lists of overlapping files.  

##  Get_Membrane.r

This script is a simple R script to generate a membrane protein call used in the Make_Sup_Table.r script and requires a Uniprot database with the cell component and topological domain information in columns.  
